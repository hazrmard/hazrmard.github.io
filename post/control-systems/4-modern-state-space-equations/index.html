<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="matlab,control systems,engineering"><meta name=description content="In modern control approaches, systems are analyzed in time domain as a set of differential equations. Higher order differential equations are decomposed into sets of first order equations of state variables that represent the system internally. This produces three sets of variables:
 Input variables are stimuli given to the system. Denoted by $u$. Output variables are the result of the current system state and inputs. Denoted by $y$. State variables represent the internal state of a system which may be obscured in the output variables."><link rel=stylesheet type=text/css href=/css/hugolb.css><link rel=stylesheet type=text/css href=/css/cosmetic.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-118761164-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-118761164-1')</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css integrity=sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js integrity=sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1}]})"></script><title>Ibrahim Ahmed: Modern control: State space equations</title></head><body><div class=container><article class=content><h1 class=post-title>Modern control: State space equations</h1><div class=front-matter><em>Monday, Sep 24, 2018</em><br>Section:
<a href=/>Home</a>
/ <a href=/post>Post</a>
/ <a href=/post/control-systems>Control systems</a><br>Categories:
<a href=/categories/engineering>Engineering</a>,<br>Tags:
<a href=/tags/matlab>Matlab</a>,
<a href=/tags/control-systems>Control Systems</a>,</div><p>In modern control approaches, systems are analyzed in time domain as a set of differential equations. Higher order differential equations are decomposed into sets of first order equations of <em>state variables</em> that represent the system internally. This produces three sets of variables:</p><ul><li><strong>Input</strong> variables are stimuli given to the system. Denoted by $u$.</li><li><strong>Output</strong> variables are the result of the current system state and inputs. Denoted by $y$.</li><li><strong>State</strong> variables represent the internal state of a system which may be obscured in the output variables. Denoted by $x$.</li></ul><h2 id=state-space-equations>State-space equations</h2><p>A state-space model is represented by two sets of equations.</p><h3 id=state-equation>State equation</h3><p>The state equation represents how the internal state of the system is changing with time. The rate of change of state depends on the current state, inputs, and time.</p><p>$$
x'(t) = f(t, x(t), u(t))
$$</p><p>Where $x$ is a vector of state variables. For the case where $x'(t)$ is a linear combination of inputs and states, and the system is time invariant:</p><p>$$
x'(t) = Ax(t) + Bu(t)
$$</p><h3 id=output-equation>Output equation</h3><p>The output equation represents what will be observed from the system in response to the inputs. The outputs also depend on the current state, inputs, and time.</p><p>$$
y(t) = g(t, x(t), u(t))
$$</p><p>And for the linear, time invariant case:</p><p>$$
y(t) = Cx(t) + Du(t)
$$</p><h2 id=state-space-matrices>State-space matrices</h2><p>Each matrix $A, B, C, D$ has a special meaning regarding the behaviour of the system.</p><ul><li><p><strong>$A$ - System matrix:</strong> $A$ provides the rate of change of state from the current system state.</p></li><li><p><strong>$B$ - control matrix</strong>: $B$ provides the rate of change of state from the control input.</p></li><li><p><strong>$C$ - output matrix</strong>: $C$ calculates the contribution of the system state to the system output variables.</p></li><li><p><strong>$D$ - feed-forward matrix</strong>: $D$ calculates the contribution of the control input to the system output variables.</p></li></ul><h2 id=example---spring-mass-system>Example - spring mass system</h2><figure><img src=/img/posts/ai-methods-for-control-systems/4-spring-system.png alt="A spring mass system showing the 3 acting forces and the resultant force."><figcaption><p>A spring mass system showing the 3 acting forces and the resultant force.</p></figcaption></figure><p>Let&rsquo;s take a spring mass system. There are three forces acting on it:</p><ul><li><p>$u(t)$ - the external input force acting on the mass.</p></li><li><p>$-k \cdot y(t)$ - The force due to the spring. The force acts in the direction opposite to the extension/compression of the spring. It is proportional to the amount of extension/compression.</p></li><li><p>$-a \cdot y'(t)$ - The viscous force i.e. air resistance. The force acts in the direction opposite to the motion of the mass. It is proportional to the velocity of the mass.</p></li></ul><p>Summing all components up gives the resultant force, according to Newton&rsquo;s second law of motion:</p><div>$$
\begin{align*}
m \cdot y''(t) &= u(t) - k \cdot y(t) - a \cdot y'(t) \\
m \cdot y''(t) + k \cdot y(t) + a \cdot y'(t) &= u(t)
\end{align*}
$$</div><p>This is a second order ordinary differential equation (ODE). It relates the output variable $y$ (the displacement of the mass) to the input variable $u$ (the external force). The equation can be broken down into two first order differential equations by appointing $n$ state variables for an $n^{th}$ order ODE for the $0^{th}$ through $(n-1)^{th}$ derivatives of the output variable.</p><div>$$
x(t) =
\begin{bmatrix}
x_1(t) \\
x_2(t) \\
\end{bmatrix}
=
\begin{bmatrix}
y(t) \\
y'(t) \\
\end{bmatrix}
$$</div><p>Then differentiating and substituting for state variables.</p><div>$$
\begin{align*}
x'(t) &=
\begin{bmatrix}
    x_1'(t) \\
x_2'(t) \\
\end{bmatrix}
=
\begin{bmatrix}
x_2(t) \\
y''(t) \\
\end{bmatrix} \\<p>x'(t) &=
\begin{bmatrix}
x_2(t) \<br>\frac{1}{m}(u(t) - k \cdot x_1(t) - a \cdot x_2(t)) \<br>\end{bmatrix} \</p><p>x'(t) &=
\begin{bmatrix}
x_2(t) \<br>\frac{1}{m}(- k \cdot x_1(t) - a \cdot x_2(t))
\end{bmatrix}
+
\begin{bmatrix}
0 \<br>\frac{1}{m}u(t)
\end{bmatrix} \</p><p>x'(t) &=
\begin{bmatrix}
0 & 1 \<br>\frac{-k}{m} & \frac{-a}{m}
\end{bmatrix}
\cdot x(t)
+
\begin{bmatrix}
0 \<br>\frac{1}{m}
\end{bmatrix}
\cdot u(t)
\end{align*}
$$</div></p><p>Which gives us for the state equation:</p><div>$$
A =
\begin{bmatrix}
0 &   1       \\
    \frac{-k}{m} & \frac{-a}{m}
\end{bmatrix},
B =
\begin{bmatrix}
0 \\
\frac{1}{m}
\end{bmatrix}
$$</div><p>Similarly, knowing that $x_1(t) = y(t)$, we can construct:</p><div>$$
y(t) =
\begin{bmatrix}
1 &   0
\end{bmatrix}
\cdot x(t)
 +
\begin{bmatrix}
0
\end{bmatrix}
\cdot u(t)
$$</div><p>Which gives us for the output equation:</p><div>$$
C =
\begin{bmatrix}
1 &   0
\end{bmatrix},
D = 
\begin{bmatrix}
0
\end{bmatrix}
$$</div><br><div class=navigation><a href=https://iahmed.me/post/control-systems/3-classical-transfer/><div class="prev nav-item">← Previous Post</div></a><a href=https://iahmed.me/post/control-systems/5-modern-state-transition/><div class="next nav-item">Next Post →</div></a></div><br></article><div class=sidebar><div class=menu-icon><h2>≡</h2></div><div class=title><h1 class=site-name>Ibrahim Ahmed</h1><div class=sb-links><a href=https://www.linkedin.com/in/IbrahimAhmed1><img src=/img/LinkIcons/svg/linkedin.svg></a>
<a href=https://github.com/hazrmard><img src=/img/LinkIcons/svg/github.svg></a>
<a href="https://scholar.google.com/citations?user=_Nn9bWgAAAAJ&hl=en"><img src=/img/LinkIcons/svg/google-scholar.svg></a>
<a href=http://stackoverflow.com/users/4591810/hazrmard><img src=/img/LinkIcons/svg/stackoverflow.svg></a></div></div><ul class=menu-list><a href=/><li class=sb-option><img src=/img/LinkIcons/svg/home.svg alt=Home><span class=menu-option-name>Home</span></li></a><a href=/about/><li class=sb-option><img src=/img/LinkIcons/svg/person.svg alt="About Me"><span class=menu-option-name>About Me</span></li></a><a href=/resume/><li class=sb-option><img src=/img/LinkIcons/svg/document.svg alt=Résumé><span class=menu-option-name>Résumé</span></li></a><a href=#noexist><li class="sb-option dropdown"><img src=/img/LinkIcons/svg/pencil.svg alt=Posts><span class=menu-option-name>Posts</span><div class=submenu><ul><a href=/categories><li>By Categories</li></a><a href=/tags><li>By Tags</li></a><a href=/post><li>All</li></a></ul></div></li></a><a href=/project/><li class=sb-option><img src=/img/LinkIcons/svg/terminal.svg alt=Projects><span class=menu-option-name>Projects</span></li></a></ul></div><div class=footer><div class=copyright>© Ibrahim Ahmed</div></div></div></body></html>